@page
@model Danplanner.Client.Pages.ConfirmationModel
@{
    ViewData["Title"] = "Confirmation";
}

<div class="confirm-grid">

    <div class="form-box">
        <h5>Dine oplysninger</h5>

        <div class="form-fields">
            <input class="form-control" placeholder="Navn" />
            <input class="form-control" placeholder="Email" />
            <input class="form-control" placeholder="Adresse" />
        </div>
    </div>

    <div class="accom-box">

        <div class="accom-header">
            <div class="accom-info">
                <h4>@Model.SelectedAccommodation?.AccommodationName</h4>
                <p class="accom-desc">@Model.SelectedAccommodation?.AccommodationDescription</p>
            </div>

            <div class="date-box">
                <div><strong>Ankomst:</strong> @Model.StartDisplay</div>
                <div><strong>Afrejse:</strong> @Model.EndDisplay</div>
                <div><strong>Dage:</strong> @Model.Days</div>
            </div>
        </div>

        <div class="price-box-confirm">
            <div><strong>Pris pr. nat:</strong></div>
            <div>@Model.SelectedAccommodation?.PricePerNight</div>
        </div>

        <div class="guest-item">
            <span class="guest-label">Voksne</span>
            <div class="guest-controls">
                <button type="button" class="btn btn-secondary small-btn" onclick="changeGuestCount('adult', -1)">-</button>
                <span id="adult-count" class="guest-count">0</span>
                <button type="button" class="btn btn-secondary small-btn" onclick="changeGuestCount('adult', 1)">+</button>
            </div>
        </div>

        <div class="guest-item">
            <span class="guest-label">Børn</span>
            <div class="guest-controls">
                <button type="button" class="btn btn-secondary small-btn" onclick="changeGuestCount('child', -1)">-</button>
                <span id="child-count" class="guest-count">0</span>
                <button type="button" class="btn btn-secondary small-btn" onclick="changeGuestCount('child', 1)">+</button>
            </div>
        </div>


        <div class="addons">
            <h5 class="section-title">Tilkøb</h5>

            @foreach (var addon in Model.Addons)
            {
                <div class="addon-item">
                    <div class="addon-text">
                        <strong>@addon.AddonName</strong>
                        <small>@addon.AddonDescription</small>
                        <small>@addon.AddonPrice kr.</small>
                    </div>

                    <div class="addon-controls">
                        <button type="button" class="btn btn-secondary small-btn">-</button>
                        <span>0</span>
                        <button type="button" class="btn btn-secondary small-btn">+</button>
                    </div>
                </div>
            }
        </div>

        <div class="total-box">
            <div>Total pris:</div>
            <div>@Model.TotalPriceDisplay</div>
        </div>

        <form method="post" asp-page-handler="Pay">
            <input type="hidden" asp-for="UnitId" />
            <button type="submit" class="btn btn-primary pay-btn">Betal</button>
        </form>

    </div>

    <aside class="accom-aside">
        <div class="sticky-wrapper">
            <div class="contact-box">
                <h6><span class="badge bg-dark">i</span> Kontakt Information</h6>
                <p><strong>Tlf:</strong> @Model.ContactInformation.ContactPhoneNumber</p>
                <p><strong>Email:</strong> @Model.ContactInformation.ContactEmail</p>
                <p><strong>Adresse:</strong> @Model.ContactInformation.ContactAdress</p>
            </div>
        </div>
    </aside>

</div>


<style>
    .confirm-grid {
        display: grid;
        grid-template-columns: 1fr 320px;
        grid-template-areas:
            "form aside"
            "accom aside";
        gap: 24px;
        align-items: start;
        max-width: 1140px;
        margin: 0 auto;
        padding: 0 12px;
    }

    /* Tildel grid-områder */
    .form-box {
        grid-area: form;
    }

    .accom-box {
        grid-area: accom;
    }

    .accom-aside {
    grid-area: aside;
    align-self: start;
    display: flex;
    flex-direction: column;
}

.sticky-wrapper {
    position: relative;
    max-height: calc(100vh - 20px);
}

.contact-box {
    position: sticky;
    top: 0;
    border: 1px solid #333;
    background: #f7f7f7;
    padding: 12px;
    border-radius: 4px;
    overflow-y: auto; /* scroll hvis for høj */
}


    .form-box {
        border: 1px solid #ccc;
        background: #fafafa;
        padding: 14px;
        border-radius: 6px;
    }

    .form-fields {
        display: grid;
        gap: 12px;
        margin-top: 12px;
    }

    /* Bedre spacing og jævn struktur */
    .accom-box {
        border: 1px solid #ccc;
        background: #fff;
        padding: 20px;
        border-radius: 6px;
        display: flex;
        flex-direction: column;
        gap: 24px;
    }

    /* Header */
    .accom-header {
        display: flex;
        justify-content: space-between;
        gap: 20px;
    }

    .accom-info h4 {
        margin: 0 0 6px 0;
    }

    .accom-desc {
        margin: 0;
        color: #444;
    }

    /* Datoer */
    .date-box div {
        margin-bottom: 4px;
        white-space: nowrap;
    }

    /* Pris-boks */
    .price-box-confirm {
        display: flex;
        justify-content: space-between;
        padding: 12px 0;
        border-top: 1px solid #eee;
        border-bottom: 1px solid #eee;
        font-size: 16px;
    }

    .guest-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }

    .guest-label {
        font-weight: 500;
    }

    /* Kontroller: - 0 + */
    .guest-controls {
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .guest-count {
        min-width: 24px;
        text-align: center;
        display: inline-block;
    }

    .small-btn {
        padding: 2px 8px;
        font-size: 0.8rem;
        height: 28px;
    }


    /* Tilkøb sektionen */
    .section-title {
        margin: 0 0 10px 0;
    }

    .addon-item {
        display: flex;
        justify-content: space-between;
        padding: 12px 0;
        border-bottom: 1px solid #f0f0f0;
    }

    .addon-text {
        display: flex;
        flex-direction: column;
        gap: 2px;
    }

    /* Total */
    .total-box {
        display: flex;
        justify-content: space-between;
        font-size: 18px;
        font-weight: bold;
    }

    /* Betal knap */
    .pay-btn {
        width: 100%;
        padding: 12px;
    }

</style>
